
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Installation &#8212; mocafe 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/class.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/functions.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Code Documentation" href="code_documentation.html" />
    <link rel="prev" title="Angiogenesis 3D" href="demo_doc/angiogenesis_3d.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Currently, <em>mocafe</em> has been tested only on Linux and on Windows, using the Windows Subsystem for Linux (WSL). In both
cases the installation instructions are identical.</p>
<p><em>Notice:</em> WSL is available for Windows 10 onwards.</p>
<section id="installing-mocafe-in-singularity-container-recommended">
<h2>Installing <em>mocafe</em> in Singularity container (<strong>recommended</strong>)<a class="headerlink" href="#installing-mocafe-in-singularity-container-recommended" title="Permalink to this headline">¶</a></h2>
<p>A FEniCS Docker container is available at <a class="reference external" href="quay.io/fenicsproject/stable">quay.io/fenicsproject/stable</a>; however,
Docker does not provide a full support to MPI. Thus, the best way to use FEniCS and <em>mocafe</em> in a container is to use
<a class="reference external" href="https://sylabs.io/docs/">Singularity</a>, which supports also Docker containers.</p>
<p>If you don’t have Singularity installed, just follow the instruction provided at the official <a class="reference external" href="https://github.com/sylabs/singularity">documentation page
for SingularityCE</a>.</p>
<p>If you have Singularity, just build a FEniCS container typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">singularity build fenics.sif docker:quay.io/fenicsproject/stable:latest</span>
</pre></div>
</div>
<p>It may take some time to do all the necessary operations.</p>
<p>Now, the plan is to use our FEniCS singularity container (<code class="docutils literal notranslate"><span class="pre">fenics.sif</span></code>) and install <em>mocafe</em> inside it using <code class="docutils literal notranslate"><span class="pre">pip</span></code>.
However, using <code class="docutils literal notranslate"><span class="pre">pip</span></code> inside a singularity container is not enough to separate your host system python packages from
those you’re using in your container. A good solution to this problem is provided <a class="reference external" href="https://git.its.aau.dk/CLAAUDIA/docs_aicloud/src/branch/master/aicloud_slurm/pip_in_containers/pip_in_containers.md">here</a>
and we’re going to use this approach in the following.</p>
<p>First of all, create a local directory for the <em>mocafe</em> python package. If your Linux username is <code class="docutils literal notranslate"><span class="pre">username</span></code>, you can
simpy do something like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir /home/username/.mocafe-local</span>
</pre></div>
</div>
<p>Then enter the Singularity container using the <code class="docutils literal notranslate"><span class="pre">shell</span></code> command, using the <code class="docutils literal notranslate"><span class="pre">--bind</span></code> option bind the directory we
just created with the directory <code class="docutils literal notranslate"><span class="pre">/home/username/.local</span></code>. The reason for that will become clear later.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">singularity shell --bind /home/username/.mocafe-local:/home/username/.local fenics.sif</span>
</pre></div>
</div>
<p>Now you are inside a container with FEniCS and MPI installed. So, you just require to install mocafe
using pip:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip3 install --user git+https://github.com/fpradelli94/mocafe#egg=mocafe</span>
</pre></div>
</div>
<p><em>Note</em>: some warnings regarding the pip version inside the container may occur. You can ignore them.</p>
<p>Now <em>mocafe</em> with all its dependencies is installed on your container! Test it typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m mocafe</span>
</pre></div>
</div>
<p>If everything is working properly, you should see the output message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Your mocafe is ready!</span>
</pre></div>
</div>
<p>If everything worked out well, you might wander why we recommended you to create the folder
<code class="docutils literal notranslate"><span class="pre">/home/username/.mocafe-local</span></code>. The fact is that the default behaviour of <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span></code> is to
place the python package you’re installing in the folder <code class="docutils literal notranslate"><span class="pre">/home/username/.local</span></code>. However, being inside
a singularity container doesn’t stop <code class="docutils literal notranslate"><span class="pre">pip</span></code> to use your host system <code class="docutils literal notranslate"><span class="pre">.local</span></code> directory, with the result that
you have a python package installed inside a container on your host system as well. Thus, we just created
a new directory (<code class="docutils literal notranslate"><span class="pre">.mocafe-local</span></code>) and we told singularity to just consider that directory as the <code class="docutils literal notranslate"><span class="pre">.local</span></code>
directory for the container, using the option <code class="docutils literal notranslate"><span class="pre">--bind</span></code> (full documentation <a class="reference external" href="https://sylabs.io/guides/latest/user-guide/bind_paths_and_mounts.html">here</a>). So now we have all our python
packages secured in their folder and we don’t risk to mix up different things.</p>
</section>
<section id="installing-mocafe-on-your-linux-system-not-recommended">
<h2>Installing <em>mocafe</em> on your Linux system (<strong>not recommended</strong>)<a class="headerlink" href="#installing-mocafe-on-your-linux-system-not-recommended" title="Permalink to this headline">¶</a></h2>
<p>An alternative way to have FEniCS and <em>mocafe</em> on your PC is to install both FEniCS and <em>mocafe</em> directly on your
system. The following procedure is currently supported but not recommended, since FEniCS is transitioning from
its version 2019 to FEniCSx and the apt package might not be supported in the future.</p>
<p>First of all, if you don’t already have it on your system, is recommended to install MPI:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install openmpi-bin</span>
</pre></div>
</div>
<p>And test it using <code class="docutils literal notranslate"><span class="pre">mpirun</span> <span class="pre">--version</span></code>. If everything worked out well, you should get something like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mpirun (Open MPI) 4.0.3</span>

<span class="go">Report bugs to http://www.open-mpi.org/community/help/</span>
</pre></div>
</div>
<p>Then, install FEniCS using <code class="docutils literal notranslate"><span class="pre">apt-get</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt-get install software-properties-common</span>
<span class="go">sudo add-apt-repository ppa:fenics-packages/fenics</span>
<span class="go">sudo apt-get update</span>
<span class="go">sudo apt-get install fenics</span>
</pre></div>
</div>
<p>Test if FEniCS has been correctly installed trying to import it on IPython:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3</span>
<span class="go">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="gp">&gt;</span>&gt;&gt; import fenics
<span class="gp">&gt;</span>&gt;&gt;
</pre></div>
</div>
<p>If FEniCS works, you can proceed to installing <em>mocafe</em> using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip3 install git+https://github.com/fpradelli94/mocafe#egg=mocafe</span>
</pre></div>
</div>
<p>Test it executing the main script:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m mocafe</span>
</pre></div>
</div>
<p>I everything is properly working, the output should be:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Your mocafe is ready!</span>
</pre></div>
</div>
</section>
<section id="uninstalling">
<h2>Uninstalling<a class="headerlink" href="#uninstalling" title="Permalink to this headline">¶</a></h2>
<p>In case you want to remove <em>mocafe</em> and its dependencies from your system, you just need to follow the instructions
provided below. Notice that uninstalling instruction change depending on the installation procedure you followed.</p>
<p>In case you installed <em>mocafe</em> using singularity:</p>
<ol class="arabic simple">
<li><p>Uninstall <em>mocafe</em> and its python dependencies using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span></code> (inside the container); see section <a class="reference internal" href="#uninstalling-mocafe"><span class="std std-ref">Uninstalling mocafe</span></a></p></li>
<li><p>In case you created it, remove the folder <code class="docutils literal notranslate"><span class="pre">/home/username/.mocafe-local</span></code> using <code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">-r</span> <span class="pre">/home/username/.mocafe-local</span></code></p></li>
<li><p>Remove the FEniCS container (in case you don’t need it anymore); see section <a class="reference internal" href="#remove-fenics-container"><span class="std std-ref">Remove FEniCS container</span></a></p></li>
<li><p>Remove Singularity (in case you don’t need it anymore); see section <a class="reference internal" href="#remove-singularity"><span class="std std-ref">Remove Singularity</span></a></p></li>
</ol>
<p>In case you installed <em>mocafe</em> using <code class="docutils literal notranslate"><span class="pre">apt</span></code>:</p>
<ol class="arabic simple">
<li><p>Uninstall <em>mocafe</em> and its python dependencies using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span></code>; see section <a class="reference internal" href="#uninstalling-mocafe"><span class="std std-ref">Uninstalling mocafe</span></a></p></li>
<li><p>Remove FEniCS using <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">autoremove</span></code>; see section <a class="reference internal" href="#remove-fenics-apt"><span class="std std-ref">Remove FEniCS with apt</span></a></p></li>
</ol>
<section id="uninstalling-mocafe">
<span id="id1"></span><h3>Uninstalling <em>mocafe</em><a class="headerlink" href="#uninstalling-mocafe" title="Permalink to this headline">¶</a></h3>
<p>To do so, you just need to type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip uninstall mocafe</span>
</pre></div>
</div>
<p>Notice that <em>mocafe</em> has some dependencies, such as <code class="docutils literal notranslate"><span class="pre">tqdm</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, and so on, that won’t be automatically
removed with the command above. To remove them, you need to tell <code class="docutils literal notranslate"><span class="pre">pip</span></code> to do so.</p>
<p>This is what you need to type to remove <em>moacfe</em> with all its dependencies:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip uninstall mocafe numpy pandas pandas-ods-reader tqdm</span>
</pre></div>
</div>
<p>Of course, if you use any of the packages listed above for other purposes you should not remove them.</p>
</section>
<section id="remove-fenics-container">
<span id="id2"></span><h3>Remove FEniCS container<a class="headerlink" href="#remove-fenics-container" title="Permalink to this headline">¶</a></h3>
<p>To remove correctly the FEniCS container from your system, you first need to remove all the cached data:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">singularity cache clean fenics.sif</span>
</pre></div>
</div>
<p>Then, you can simply remove the <code class="docutils literal notranslate"><span class="pre">fenics.sif</span></code> file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rm fenics.sif</span>
</pre></div>
</div>
</section>
<section id="remove-singularity">
<span id="id3"></span><h3>Remove Singularity<a class="headerlink" href="#remove-singularity" title="Permalink to this headline">¶</a></h3>
<p>There is no “out of the box” method to remove Singularity from your system, since the recommended way to install
it is to compile it from source.
The easier way to remove it is to just remove the following folders from your computer:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rm -rf /usr/local/etc/singularity \</span>
<span class="go">   /usr/local/etc/bash_completion.d/singularity \</span>
<span class="go">   /usr/local/bin/singularity \</span>
<span class="go">   /usr/local/libexec/singularity \</span>
<span class="go">   /usr/local/var/singularity</span>
</pre></div>
</div>
</section>
<section id="remove-fenics-with-apt">
<span id="remove-fenics-apt"></span><h3>Remove FEniCS with apt<a class="headerlink" href="#remove-fenics-with-apt" title="Permalink to this headline">¶</a></h3>
<p>In case you installed FEniCS using apt, you can just remove it with all its dependencies using <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">autoremove</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt autoremove fenics -y</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/200mocafe_logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">mocafe</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="demo_doc/index.html">Demo Gallery</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-mocafe-in-singularity-container-recommended">Installing <em>mocafe</em> in Singularity container (<strong>recommended</strong>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-mocafe-on-your-linux-system-not-recommended">Installing <em>mocafe</em> on your Linux system (<strong>not recommended</strong>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#uninstalling">Uninstalling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="code_documentation.html">Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="bib.html">Bibliography</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="demo_doc/angiogenesis_3d.html" title="previous chapter">Angiogenesis 3D</a></li>
      <li>Next: <a href="code_documentation.html" title="next chapter">Code Documentation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Franco Pradelli.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/installation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>