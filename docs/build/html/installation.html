<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; Mocafe 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="_static/sg_gallery-rendered-html.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="autoapi/index.html" />
    <link rel="prev" title="Save simulations meta-data 2" href="demo_doc/multiple_angiogenesis_simulations.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mocafe
              <img src="_static/200mocafe_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="demo_doc/index.html">Demo Gallery</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-with-apt-and-pip">Install with <code class="docutils literal notranslate"><span class="pre">apt</span></code> and <code class="docutils literal notranslate"><span class="pre">pip</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-mpi">Install MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-fenics">Install FEniCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-mocafe">Install Mocafe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install-singularity-container">Install Singularity container</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-singularity">Install Singularity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-and-test-mocafe-container">Install and test Mocafe container</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#uninstalling">Uninstalling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uninstalling-mocafe">Uninstalling Mocafe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-fenics-with-apt">Remove FEniCS with apt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-mocafe-container">Remove Mocafe container</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-singularity">Remove Singularity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="bib.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mocafe</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h1>
<p>You have two options to install Mocafe:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#mocafe-apt"><span class="std std-ref">Install with apt and pip</span></a></p></li>
<li><p><a class="reference internal" href="#mocafe-singularity"><span class="std std-ref">Install Singularity container</span></a></p></li>
</ul>
<p>Currently, Mocafe has been tested on:</p>
<ul class="simple">
<li><p>Linux (Ubuntu 20.04)</p></li>
<li><p>Windows (using Windows Subsystem for Linux 2.0)</p></li>
</ul>
<p><em>Notice:</em> WSL is available for Windows 10 onwards.</p>
<section id="install-with-apt-and-pip">
<span id="mocafe-apt"></span><h2>Install with <code class="docutils literal notranslate"><span class="pre">apt</span></code> and <code class="docutils literal notranslate"><span class="pre">pip</span></code><a class="headerlink" href="#install-with-apt-and-pip" title="Permalink to this headline"></a></h2>
<p>The procedure requires three steps:</p>
<ol class="arabic simple">
<li><p>Install MPI</p></li>
<li><p>Install FEniCS</p></li>
<li><p>Install Mocafe</p></li>
</ol>
<section id="install-mpi">
<h3>Install MPI<a class="headerlink" href="#install-mpi" title="Permalink to this headline"></a></h3>
<p>First of all, verify if you have MPI already installed on your system. You can do it easily with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpirun</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>If you don’t already have it on your system, it is recommended to install it with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install openmpi-bin</span>
</pre></div>
</div>
<p>And test it typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpirun</span> <span class="o">--</span><span class="n">version</span>
</pre></div>
</div>
<p>If everything worked out well, you should get something like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mpirun (Open MPI) 4.0.3</span>

<span class="go">Report bugs to http://www.open-mpi.org/community/help/</span>
</pre></div>
</div>
<p>And you can <strong>proceed</strong> to the next step.</p>
<p>If you had <strong>problems</strong> in the procedure above, we recommend you to use the Singularity container of Mocafe
(see section <a class="reference internal" href="#mocafe-singularity"><span class="std std-ref">Install Singularity container</span></a>), which already includes MPI. However, you can also use other methods to
install MPI, such as <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">mpich</span></code>.</p>
</section>
<section id="install-fenics">
<h3>Install FEniCS<a class="headerlink" href="#install-fenics" title="Permalink to this headline"></a></h3>
<p>Then, install FEniCS using <code class="docutils literal notranslate"><span class="pre">apt-get</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt-get install software-properties-common</span>
<span class="go">sudo add-apt-repository ppa:fenics-packages/fenics</span>
<span class="go">sudo apt-get update</span>
<span class="go">sudo apt-get install fenics</span>
</pre></div>
</div>
<p>Test if FEniCS has been correctly installed trying to import it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -c &quot;import fenics; print(&#39;FEniCS is Installed&#39;)&quot;</span>
</pre></div>
</div>
<p>If everything worked out well, you should get the message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">FEniCS is Installed</span>
</pre></div>
</div>
<p>If you encounter errors, you can:</p>
<ul class="simple">
<li><p>Use the Singularity container of Mocafe (see section <a class="reference internal" href="#mocafe-singularity"><span class="std std-ref">Install Singularity container</span></a>)</p></li>
<li><p>Try to install FEniCS in other ways; see <a class="reference external" href="https://fenicsproject.org/download/archive/">FEniCS 2019 Download page</a></p></li>
</ul>
</section>
<section id="install-mocafe">
<h3>Install Mocafe<a class="headerlink" href="#install-mocafe" title="Permalink to this headline"></a></h3>
<p>If FEniCS works, you can proceed to installing Mocafe using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip3 install git+https://github.com/BioComputingUP/mocafe#egg=mocafe</span>
</pre></div>
</div>
<p>Test it executing the main script:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m mocafe</span>
</pre></div>
</div>
<p>I everything is properly working, the output should be:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Your Mocafe is ready!</span>
</pre></div>
</div>
<p><em>Note</em>: FEniCS is transitioning from version “2019” to FEniCSx, so the <code class="docutils literal notranslate"><span class="pre">apt</span></code> package might not be supported in the
future. In that case, consider using the Mocafe container as explained below.</p>
</section>
</section>
<section id="install-singularity-container">
<span id="mocafe-singularity"></span><h2>Install Singularity container<a class="headerlink" href="#install-singularity-container" title="Permalink to this headline"></a></h2>
<p>Singularity, like Docker, is a container platform which allows you to create and run containers that package up pieces
of software in a way that is portable and reproducible. We preferred using Singularity instead of Docker because it is
optimized to work on large HPC clusters and take full advantage of MPI.</p>
<section id="install-singularity">
<h3>Install Singularity<a class="headerlink" href="#install-singularity" title="Permalink to this headline"></a></h3>
<p>If you don’t have Singularity installed, just follow the instructions provided at the official documentation
page for SingularityCE.</p>
<p>You can find the SingularityCE documentation <a class="reference external" href="https://sylabs.io/docs">at this link</a>. To find the installation
instructions, just:</p>
<ul class="simple">
<li><p>find the <strong>User Guide</strong> for the Last Released Version</p></li>
<li><p>look for the <strong>Quick Installation Steps</strong></p></li>
<li><p>follow them to install Singularity</p></li>
</ul>
<p>Notice that the procedure might take some time and requires the installation of the Singularity dependencies and the
<code class="docutils literal notranslate"><span class="pre">go</span></code> language.</p>
</section>
<section id="install-and-test-mocafe-container">
<h3>Install and test Mocafe container<a class="headerlink" href="#install-and-test-mocafe-container" title="Permalink to this headline"></a></h3>
<p><strong>If you have Singularity</strong>:</p>
<ol class="arabic">
<li><p>Download the definition file <code class="docutils literal notranslate"><span class="pre">mocafe.def</span></code> from <a class="reference external" href="https://github.com/BioComputingUP/mocafe/blob/main/singularity/mocafe.def">here</a>,
or, if you have <code class="docutils literal notranslate"><span class="pre">wget</span></code>:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">wget https://raw.githubusercontent.com/BioComputingUP/mocafe/main/singularity/mocafe.def</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>From the terminal, built the container (it might take some time):</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo singularity build mocafe.sif mocafe.def</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>Now you already have a Singularity image with all you need to use Mocafe on your system.</p>
<p><strong>To test the container</strong>:</p>
<ol class="arabic">
<li><p>Open a shell inside the container:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">singularity shell mocafe.sif</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>type:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m mocafe</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>If everything is working properly, you should see the output message:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Your Mocafe is ready!</span>
</pre></div>
</div>
<p>And now you can run any Mocafe or FEniCS script inside the container.</p>
<p><em>Notice</em>: by default, Singularity binds the home path of the container with the home of the host system. So, you can
find and use any file of your host system inside the container.</p>
</section>
</section>
<section id="uninstalling">
<h2>Uninstalling<a class="headerlink" href="#uninstalling" title="Permalink to this headline"></a></h2>
<p>In case you want to remove Mocafe and its dependencies from your system, you just need to follow the instructions
provided below. Notice that uninstalling instruction change depending on the installation procedure you followed.</p>
<p>In case you installed Mocafe using <code class="docutils literal notranslate"><span class="pre">apt</span></code> and <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<ol class="arabic simple">
<li><p>Uninstall Mocafe and its python dependencies using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span></code>; see section <a class="reference internal" href="#uninstalling-mocafe"><span class="std std-ref">Uninstalling Mocafe</span></a></p></li>
<li><p>Remove FEniCS using <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">autoremove</span></code>; see section <a class="reference internal" href="#remove-fenics-apt"><span class="std std-ref">Remove FEniCS with apt</span></a></p></li>
</ol>
<p>In case you installed Mocafe using Singularity:</p>
<ol class="arabic simple">
<li><p>Remove the Mocafe container; see section <a class="reference internal" href="#remove-mocafe-container"><span class="std std-ref">Remove Mocafe container</span></a></p></li>
<li><p>Remove Singularity (in case you don’t need it anymore); see section <a class="reference internal" href="#remove-singularity"><span class="std std-ref">Remove Singularity</span></a></p></li>
</ol>
<section id="uninstalling-mocafe">
<span id="id1"></span><h3>Uninstalling Mocafe<a class="headerlink" href="#uninstalling-mocafe" title="Permalink to this headline"></a></h3>
<p>To do so, you just need to type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip uninstall mocafe</span>
</pre></div>
</div>
<p>Notice that Mocafe has some dependencies, such as <code class="docutils literal notranslate"><span class="pre">tqdm</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, and so on, that won’t be automatically
removed with the command above. To remove them, you need to tell <code class="docutils literal notranslate"><span class="pre">pip</span></code> to do so.</p>
<p>This is what you need to type to remove <em>moacfe</em> with all its dependencies:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip uninstall mocafe numpy pandas pandas-ods-reader tqdm</span>
</pre></div>
</div>
<p>Of course, if you use any of the packages listed above for other purposes you should not remove them.</p>
</section>
<section id="remove-fenics-with-apt">
<span id="remove-fenics-apt"></span><h3>Remove FEniCS with apt<a class="headerlink" href="#remove-fenics-with-apt" title="Permalink to this headline"></a></h3>
<p>In case you installed FEniCS using apt, you can just remove it with all its dependencies using <code class="docutils literal notranslate"><span class="pre">apt</span> <span class="pre">autoremove</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt autoremove fenics -y</span>
</pre></div>
</div>
</section>
<section id="remove-mocafe-container">
<span id="id2"></span><h3>Remove Mocafe container<a class="headerlink" href="#remove-mocafe-container" title="Permalink to this headline"></a></h3>
<p>To remove correctly the Mocafe container from your system, you need to remove all the cached data:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">singularity cache clean mocafe.sif</span>
</pre></div>
</div>
<p>Then, you can simply remove the <code class="docutils literal notranslate"><span class="pre">mocafe.sif</span></code> file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rm mocafe.sif</span>
</pre></div>
</div>
</section>
<section id="remove-singularity">
<span id="id3"></span><h3>Remove Singularity<a class="headerlink" href="#remove-singularity" title="Permalink to this headline"></a></h3>
<p>There is no “out of the box” method to remove Singularity from your system, since the recommended way to install
it is to compile it from source.
The easier way to remove it is to just remove the following folders from your computer:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo rm -rf /usr/local/etc/singularity \</span>
<span class="go">   /usr/local/etc/bash_completion.d/singularity \</span>
<span class="go">   /usr/local/bin/singularity \</span>
<span class="go">   /usr/local/libexec/singularity \</span>
<span class="go">   /usr/local/var/singularity</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="demo_doc/multiple_angiogenesis_simulations.html" class="btn btn-neutral float-left" title="Save simulations meta-data 2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="autoapi/index.html" class="btn btn-neutral float-right" title="API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Franco Pradelli.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #343131;
    }
  </style>


</body>
</html>